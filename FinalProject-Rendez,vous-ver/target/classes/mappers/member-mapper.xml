<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//myvatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">
	<resultMap type="Member" id="memberResultSet">
		<result property="user_no" column="USER_NO"/>
		<result property="user_id" column="USER_ID"/>
		<result property="user_pwd" column="USER_PWD"/>
		<result property="user_name" column="USER_NAME"/>
		<result property="gender" column="GENDER"/>
		<result property="age" column="AGE"/>
		<result property="phone" column="PHONE"/>
		<result property="address" column="ADDRESS"/>
		<result property="enroll_date" column="ENROLL_DATE"/>
		<result property="update_date" column="UPDATE_DATE"/>
		<result property="user_type" column="USER_TYPE"/>
		<result property="u_status" column="U_STATUS"/>
	</resultMap>
	
	<select id="loginCheck" resultType="int">
			SELECT count(*) FROM member
			WHERE user_id = #{user_id} AND user_pwd = #{user_pwd}
	</select>
	
	<select id="selectOne" resultType="member" parameterType="member">
		SELECT *
		FROM MEMBER
		WHERE USER_ID = #{user_id}
		AND U_STATUS = 'Y'
	</select>
	
	<insert id="insertMember" parameterType="Member">
		INSERT
      	INTO
      	MEMBER 
      	VALUES (SEQ_MNO.NEXTVAL, #{user_id}, #{user_pwd}, #{user_name}, #{gender}, #{age}, #{phone}, #{address}, SYSDATE, SYSDATE, DEFAULT, DEFAULT)
	</insert>
	
	<select id="idCheck" parameterType="string" resultType="_int">
		SELECT COUNT(*)
		FROM MEMBER
		WHERE USER_ID=#{user_id}
	</select>
	
	<update id="deleteMember" parameterType="Member">
		UPDATE MEMBER
		SET U_STATUS = 'N'
		WHERE USER_ID = #{user_id}
	</update>
	
	<update id="updateMember" parameterType="Member">
		UPDATE MEMBER
		SET USER_NAME = #{user_name},
			USER_PWD = #{user_pwd},
			GENDER = #{gender},
			AGE = #{age},
			PHONE = #{phone},
			ADDRESS = #{address},
			UPDATE_DATE = SYSDATE
		WHERE USER_ID = #{user_id}
	</update>

</mapper>